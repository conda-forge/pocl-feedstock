diff --git a/lib/CL/CMakeLists.txt b/lib/CL/CMakeLists.txt
index 14b1534b..7a7c7425 100644
--- a/lib/CL/CMakeLists.txt
+++ b/lib/CL/CMakeLists.txt
@@ -133,6 +133,7 @@ set(POCL_LIB_SOURCES  "clCreateContextFromType.c"
                    "pocl_runtime_config.c" "pocl_runtime_config.h"
                    "pocl_mem_management.c"  "pocl_mem_management.h"
                    "pocl_hash.c"
+                   "pocl_paths.cc"
                    "pocl_debug.h" "pocl_debug.c" "pocl_timing.c"
                    "clSVMAlloc.c" "clSVMFree.c" "clEnqueueSVMFree.c"
                    "clEnqueueSVMMap.c" "clEnqueueSVMUnmap.c"
diff --git a/lib/CL/pocl_llvm_build.cc b/lib/CL/pocl_llvm_build.cc
index f0b897f4..8b426074 100644
--- a/lib/CL/pocl_llvm_build.cc
+++ b/lib/CL/pocl_llvm_build.cc
@@ -76,6 +76,12 @@ POP_COMPILER_DIAGS
 /* Global pocl device to be used by passes if needed */
 cl_device_id currentPoclDevice = NULL;
 
+extern "C"
+{
+  const char *conda_pocl_get_clang_resource_dir();
+  const char *conda_pocl_get_pocl_install_private_datadir();
+}
+
 
 //#define DEBUG_POCL_LLVM_API
 
@@ -428,7 +434,7 @@ int pocl_llvm_build_program(cl_program program,
   if (0) {
 #endif
   } else {
-    IncludeRoot = POCL_INSTALL_PRIVATE_DATADIR;
+    IncludeRoot = conda_pocl_get_pocl_install_private_datadir();
   }
   KernelH = IncludeRoot + "/include/_kernel.h";
   BuiltinRenamesH = IncludeRoot + "/include/_builtin_renames.h";
@@ -438,7 +444,10 @@ int pocl_llvm_build_program(cl_program program,
   po.Includes.push_back(BuiltinRenamesH);
 #ifndef LLVM_OLDER_THAN_4_0
   // Use Clang's opencl-c.h header.
-  po.Includes.push_back(CLANG_RESOURCE_DIR "/include/opencl-c.h");
+  std::string clang_header_dir =
+      std::string(conda_pocl_get_clang_resource_dir())
+      + "/include/opencl-c.h";
+  po.Includes.push_back(clang_header_dir);
 #endif
   po.Includes.push_back(KernelH);
   clang::TargetOptions &ta = pocl_build.getTargetOpts();
@@ -837,7 +846,7 @@ static llvm::Module* getKernelLibrary(cl_device_id device)
     kernellib += subdir;
   } else // POCL_BUILDING == 0, use install dir
 #endif
-  kernellib = POCL_INSTALL_PRIVATE_DATADIR;
+  kernellib = conda_pocl_get_pocl_install_private_datadir();
   kernellib += "/kernel-";
   kernellib += device->llvm_target_triplet;
   if (is_host) {
diff --git a/lib/CL/pocl_paths.cc b/lib/CL/pocl_paths.cc
new file mode 100644
index 00000000..8269c034
--- /dev/null
+++ b/lib/CL/pocl_paths.cc
@@ -0,0 +1,14 @@
+#include "config.h"
+
+extern "C"
+{
+  const char *conda_pocl_get_clang_resource_dir()
+  {
+    return CLANG_RESOURCE_DIR;
+  }
+
+  const char *conda_pocl_get_pocl_install_private_datadir()
+  {
+    return POCL_INSTALL_PRIVATE_DATADIR;
+  }
+}
